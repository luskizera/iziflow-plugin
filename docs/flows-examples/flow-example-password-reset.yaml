metadata:
  name: Password Reset Process
  layout:
    algorithm: auto
    unit: 300
    first_node_position: center
    spacing:
      horizontal: 1.6u
      vertical: 2u

nodes:
  start_reset:
    type: ENTRYPOINT
    name: Begin Password Reset
    description: Entry node for password recovery.
    content: |
      Category: System

  forgot_entry:
    type: STEP
    name: Forgot Password Screen
    description: Collect user email to start reset.
    content: |
      Category: Authentication
      Title: Reset Your Password
      Prompt: Enter your registered email address.
      Input: Email Address
      Button: Send Reset Link

  email_lookup:
    type: STEP
    name: System Looks Up Email
    description: Backend validation of the provided email.
    content: |
      Category: Backend Process
      Action: Verify if the email exists in the database.
      Logic: If exists, generate unique reset token.

  confirm_sent:
    type: STEP
    name: Confirmation Message
    description: Notify user that instructions were sent.
    content: |
      Category: Feedback
      Message: If an account exists for that email, a password reset link has been sent.
      Instruction: Check inbox and spam folder, then click the link.

  reset_form:
    type: STEP
    name: New Password Form
    description: Collect new password via secure form.
    content: |
      Category: Authentication
      Context: User landed via link in email.
      Title: Set Your New Password
      Inputs:
        - New Password
        - Confirm New Password
      Validation: 8+ characters and must match.
      Button: Update Password

  success_feedback:
    type: STEP
    name: Password Updated
    description: Success feedback after password change.
    content: |
      Category: Feedback
      Message: Your password has been successfully updated!
      Next Action: You can now log in with your new password.

  end_reset:
    type: END
    name: Password Reset Complete
    description: Process ends after success feedback.
    content: |
      Category: System

connections:
  - from: start_reset
    to: forgot_entry
    label: User Initiates
  - from: forgot_entry
    to: email_lookup
    label: User Submits Email
  - from: email_lookup
    to: confirm_sent
    label: Email Processed
  - from: confirm_sent
    to: reset_form
    label: User Clicks Reset Link
  - from: reset_form
    to: success_feedback
    label: Valid New Password Submitted
  - from: success_feedback
    to: end_reset
    label: Process Finished
